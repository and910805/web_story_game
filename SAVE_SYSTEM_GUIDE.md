# 存檔系統使用說明

## 🎮 功能概覽

升級後的存檔系統提供了完善的遊戲進度管理功能：

### ✨ 主要特性

1. **🔄 自動存檔**
   - 每次對話推進時自動保存
   - 每次做出選擇後自動保存
   - 開始新遊戲時立即自動存檔
   - 優先從自動存檔讀取（點擊「繼續遊戲」）

2. **💾 手動存檔（3個槽位）**
   - 3個獨立存檔槽位
   - 每個槽位顯示詳細信息
   - 可覆蓋已有存檔
   - 可刪除不需要的存檔

3. **📂 讀檔功能**
   - 從任何槽位讀取進度
   - 也可以讀取自動存檔
   - 「繼續遊戲」會自動選擇最新存檔

4. **📊 存檔信息顯示**
   - 章節名稱
   - 當前封號
   - 寵愛值
   - 存檔時間（年/月/日 時:分）

5. **💬 友好提示**
   - 存檔成功提示
   - 讀檔成功提示
   - 刪除存檔確認
   - 新遊戲覆蓋警告

## 🎯 使用方法

### 開始遊戲

1. **開始新遊戲**
   - 點擊主選單的「開始遊戲」
   - 如有自動存檔會提示是否覆蓋
   - 開始後立即建立自動存檔

2. **繼續遊戲**
   - 點擊主選單的「繼續遊戲」
   - 自動從最新的存檔讀取（優先自動存檔）
   - 無需手動選擇槽位

### 遊戲中存檔

1. **點擊遊戲菜單** `☰` 按鈕（左上角）
2. **選擇「💾 存檔」**
3. **選擇要保存的槽位：**
   - 槽位 1, 2, 3（手動存檔）
   - 空槽位顯示「存檔到此」按鈕
   - 已有存檔顯示「覆蓋存檔」按鈕和刪除按鈕 🗑️

### 遊戲中讀檔

1. **點擊遊戲菜單** `☰` 按鈕
2. **選擇「📂 讀檔」**
3. **選擇要讀取的槽位：**
   - 🔄 自動存檔（如果有）
   - 槽位 1, 2, 3
   - 點擊「讀取」按鈕載入

### 刪除存檔

1. 在存檔界面點擊槽位右上角的 🗑️ 按鈕
2. 確認刪除操作
3. 該槽位恢復為空槽位

## 📱 存檔槽位顯示

每個存檔槽位顯示以下信息：

```
┌─────────────────────────────┐
│ 槽位 1                [🗑️] │  ← 槽位編號和刪除按鈕
├─────────────────────────────┤
│ 第一章：初入宮闈與椒房獨寵    │  ← 章節名稱
│ 👑 秀常在  💕 25            │  ← 封號和寵愛值
│ 2025/11/27 14:30           │  ← 存檔時間
│                             │
│      [覆蓋存檔]              │  ← 操作按鈕
└─────────────────────────────┘
```

空槽位顯示：
```
┌─────────────────────────────┐
│ 槽位 2                      │
├─────────────────────────────┤
│                             │
│       空槽位                 │
│                             │
│      [存檔到此]              │
└─────────────────────────────┘
```

## ⚙️ 技術細節

### 存檔數據結構

```javascript
{
    state: {...},           // 完整的遊戲狀態
    timestamp: 1701234567,  // 存檔時間戳
    chapterName: "序章：選秀風雲",
    stats: {
        title: "秀常在",
        lovePoints: 10
    }
}
```

### 存儲位置

所有存檔使用瀏覽器的 `localStorage` 保存：

- `autoSave` - 自動存檔
- `save_slot_1` - 槽位 1
- `save_slot_2` - 槽位 2
- `save_slot_3` - 槽位 3

### 自動存檔觸發時機

1. 開始新遊戲時
2. 每次顯示新場景時（`showScene()`）
3. 每次做出選擇後（`makeChoice()`）

## 💡 使用建議

### 建議的存檔策略

1. **分支點前手動存檔**
   - 在重要選擇前保存到槽位
   - 可以回溯嘗試不同選項

2. **章節結束時存檔**
   - 完成一章後保存進度
   - 方便日後從特定章節開始

3. **達成結局前存檔**
   - 最後選擇前保存
   - 可以體驗所有結局

4. **使用多個槽位**
   - 槽位 1：最新進度
   - 槽位 2：重要分支點
   - 槽位 3：備用/實驗性選擇

### 防止進度丟失

- 自動存檔會持續更新，無需手動操作
- 建議在重要節點手動存檔到槽位
- 不同設備遊玩時注意存檔不互通
- 清除瀏覽器數據會清除所有存檔

## 🔧 常見問題

**Q: 自動存檔會覆蓋手動存檔嗎？**
A: 不會，它們是獨立的。自動存檔和3個手動槽位完全分開。

**Q: 我可以回到之前的選擇嗎？**
A: 可以！使用手動存檔功能，在重要選擇前保存到槽位即可。

**Q: 存檔會保存多久？**
A: 存檔永久保存在瀏覽器中，除非手動刪除或清除瀏覽器數據。

**Q: 換了瀏覽器還能讀取存檔嗎？**
A: 不能，存檔保存在當前瀏覽器的localStorage中，不同瀏覽器無法共享。

**Q: 達成結局後存檔會被清除嗎？**
A: 不會！可以隨時讀檔回顧或嘗試其他路線。

**Q: 存檔佔用多少空間？**
A: 每個存檔約1-2KB，非常小，不用擔心空間問題。

## 🎨 UI設計亮點

- 🌸 中國宮廷風格設計
- ✨ 流暢的動畫效果
- 📱 響應式設計，支持手機和桌面
- 🎯 直觀的操作界面
- 💬 清晰的狀態提示
- 🎨 精美的視覺反饋

---

**享受遊戲吧！記得善用存檔功能探索所有劇情分支！** 🎮✨
